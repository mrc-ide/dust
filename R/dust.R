## Generated by dust (version 0.6.1) - do not edit
sir <- R6::R6Class(
  "dust",
  cloneable = FALSE,

  private = list(
    pars_ = NULL,
    pars_multi_ = NULL,
    index_ = NULL,
    info_ = NULL,
    n_threads_ = NULL,
    ptr_ = NULL,
    param_ = list(beta = list(required = FALSE), gamma = list(required = FALSE)),

    simulate = function(steps, pars, state, index = NULL,
                        n_threads = 1L, seed = NULL,
                        return_state = FALSE) {
      dust_sir_simulate(steps, pars, state, index, n_threads, seed,
                             return_state)
    },

    check_pars_multi = function(pars, len) {
      if (!is.list(pars) || !is.null(names(pars))) {
        stop("Expected 'pars' to be an unnamed list as 'pars_multi' is used")
      }
      n <- length(private$pars_)
      if (n == 0 && length(pars) == 0) {
        stop("Expected 'pars' to have at least one element")
      } else if (n > 0 && length(pars) != n) {
        stop(sprintf("Expected 'pars' to have %d elements", n))
      }
    }
  ),

  public = list(
    initialize = function(pars, step, n_particles, n_threads = 1L,
                          seed = NULL, pars_multi = FALSE) {
      if (pars_multi) {
        private$check_pars_multi(pars)
      }
      res <- dust_sir_alloc(pars, pars_multi, step, n_particles,
                        n_threads, seed)
      private$pars_ <- pars
      private$pars_multi_ <- pars_multi
      private$n_threads_ <- n_threads
      private$ptr_ <- res[[1L]]
      private$info_ <- res[[2L]]
    },

    name = function() {
      "sir"
    },

    param = function() {
      private$param_
    },

    run = function(step_end) {
      m <- dust_sir_run(private$ptr_, step_end)
      rownames(m) <- names(private$index_)
      m
    },

    set_index = function(index) {
      dust_sir_set_index(private$ptr_, index)
      private$index_ <- index
      invisible()
    },

    index = function() {
      private$index_
    },

    n_threads = function() {
      private$n_threads_
    },

    set_state = function(state, step = NULL) {
      dust_sir_set_state(private$ptr_, state, step)
    },

    reset = function(pars, step) {
      if (private$pars_multi_) {
        private$check_pars_multi(pars)
      }
      private$info_ <- dust_sir_reset(private$ptr_, pars, step)
      private$index_ <- NULL
      private$pars_ <- pars
      invisible()
    },

    set_pars = function(pars) {
      if (private$pars_multi_) {
        private$check_pars_multi(pars)
      }
      private$info_ <- dust_sir_set_pars(private$ptr_, pars)
      private$pars_ <- pars
    },

    state = function(index = NULL) {
      m <- dust_sir_state(private$ptr_, index)
      rownames(m) <- names(index)
      m
    },

    step = function() {
      dust_sir_step(private$ptr_)
    },

    reorder = function(index) {
      storage.mode(index) <- "integer"
      dust_sir_reorder(private$ptr_, index)
      invisible()
    },

    info = function() {
      private$info_
    },

    pars = function() {
      private$pars_
    },

    rng_state = function(first_only = FALSE) {
      dust_sir_rng_state(private$ptr_, first_only)
    },

    set_rng_state = function(rng_state) {
      dust_sir_set_rng_state(private$ptr_, rng_state)
      invisible()
    },

    has_openmp = function() {
      dust_sir_has_openmp()
    },

    n_pars = function() {
      if (private$pars_multi_) length(private$pars_) else 0L
    },

    set_n_threads = function(n_threads) {
      prev <- private$n_threads_
      dust_sir_set_n_threads(private$ptr_, n_threads)
      private$n_threads_ <- n_threads
      invisible(prev)
    },

    set_data = function(data) {
      dust_sir_set_data(private$ptr_, data)
    },

    compare_data = function() {
      dust_sir_compare_data(private$ptr_)
    }
  ))
class(sir) <- c("dust_generator", class(sir))
variable <- R6::R6Class(
  "dust",
  cloneable = FALSE,

  private = list(
    pars_ = NULL,
    pars_multi_ = NULL,
    index_ = NULL,
    info_ = NULL,
    n_threads_ = NULL,
    ptr_ = NULL,
    param_ = NULL,

    simulate = function(steps, pars, state, index = NULL,
                        n_threads = 1L, seed = NULL,
                        return_state = FALSE) {
      dust_variable_simulate(steps, pars, state, index, n_threads, seed,
                             return_state)
    },

    check_pars_multi = function(pars, len) {
      if (!is.list(pars) || !is.null(names(pars))) {
        stop("Expected 'pars' to be an unnamed list as 'pars_multi' is used")
      }
      n <- length(private$pars_)
      if (n == 0 && length(pars) == 0) {
        stop("Expected 'pars' to have at least one element")
      } else if (n > 0 && length(pars) != n) {
        stop(sprintf("Expected 'pars' to have %d elements", n))
      }
    }
  ),

  public = list(
    initialize = function(pars, step, n_particles, n_threads = 1L,
                          seed = NULL, pars_multi = FALSE) {
      if (pars_multi) {
        private$check_pars_multi(pars)
      }
      res <- dust_variable_alloc(pars, pars_multi, step, n_particles,
                        n_threads, seed)
      private$pars_ <- pars
      private$pars_multi_ <- pars_multi
      private$n_threads_ <- n_threads
      private$ptr_ <- res[[1L]]
      private$info_ <- res[[2L]]
    },

    name = function() {
      "variable"
    },

    param = function() {
      private$param_
    },

    run = function(step_end) {
      m <- dust_variable_run(private$ptr_, step_end)
      rownames(m) <- names(private$index_)
      m
    },

    set_index = function(index) {
      dust_variable_set_index(private$ptr_, index)
      private$index_ <- index
      invisible()
    },

    index = function() {
      private$index_
    },

    n_threads = function() {
      private$n_threads_
    },

    set_state = function(state, step = NULL) {
      dust_variable_set_state(private$ptr_, state, step)
    },

    reset = function(pars, step) {
      if (private$pars_multi_) {
        private$check_pars_multi(pars)
      }
      private$info_ <- dust_variable_reset(private$ptr_, pars, step)
      private$index_ <- NULL
      private$pars_ <- pars
      invisible()
    },

    set_pars = function(pars) {
      if (private$pars_multi_) {
        private$check_pars_multi(pars)
      }
      private$info_ <- dust_variable_set_pars(private$ptr_, pars)
      private$pars_ <- pars
    },

    state = function(index = NULL) {
      m <- dust_variable_state(private$ptr_, index)
      rownames(m) <- names(index)
      m
    },

    step = function() {
      dust_variable_step(private$ptr_)
    },

    reorder = function(index) {
      storage.mode(index) <- "integer"
      dust_variable_reorder(private$ptr_, index)
      invisible()
    },

    info = function() {
      private$info_
    },

    pars = function() {
      private$pars_
    },

    rng_state = function(first_only = FALSE) {
      dust_variable_rng_state(private$ptr_, first_only)
    },

    set_rng_state = function(rng_state) {
      dust_variable_set_rng_state(private$ptr_, rng_state)
      invisible()
    },

    has_openmp = function() {
      dust_variable_has_openmp()
    },

    n_pars = function() {
      if (private$pars_multi_) length(private$pars_) else 0L
    },

    set_n_threads = function(n_threads) {
      prev <- private$n_threads_
      dust_variable_set_n_threads(private$ptr_, n_threads)
      private$n_threads_ <- n_threads
      invisible(prev)
    },

    set_data = function(data) {
      dust_variable_set_data(private$ptr_, data)
    },

    compare_data = function() {
      dust_variable_compare_data(private$ptr_)
    }
  ))
class(variable) <- c("dust_generator", class(variable))
volatility <- R6::R6Class(
  "dust",
  cloneable = FALSE,

  private = list(
    pars_ = NULL,
    pars_multi_ = NULL,
    index_ = NULL,
    info_ = NULL,
    n_threads_ = NULL,
    ptr_ = NULL,
    param_ = NULL,

    simulate = function(steps, pars, state, index = NULL,
                        n_threads = 1L, seed = NULL,
                        return_state = FALSE) {
      dust_volatility_simulate(steps, pars, state, index, n_threads, seed,
                             return_state)
    },

    check_pars_multi = function(pars, len) {
      if (!is.list(pars) || !is.null(names(pars))) {
        stop("Expected 'pars' to be an unnamed list as 'pars_multi' is used")
      }
      n <- length(private$pars_)
      if (n == 0 && length(pars) == 0) {
        stop("Expected 'pars' to have at least one element")
      } else if (n > 0 && length(pars) != n) {
        stop(sprintf("Expected 'pars' to have %d elements", n))
      }
    }
  ),

  public = list(
    initialize = function(pars, step, n_particles, n_threads = 1L,
                          seed = NULL, pars_multi = FALSE) {
      if (pars_multi) {
        private$check_pars_multi(pars)
      }
      res <- dust_volatility_alloc(pars, pars_multi, step, n_particles,
                        n_threads, seed)
      private$pars_ <- pars
      private$pars_multi_ <- pars_multi
      private$n_threads_ <- n_threads
      private$ptr_ <- res[[1L]]
      private$info_ <- res[[2L]]
    },

    name = function() {
      "volatility"
    },

    param = function() {
      private$param_
    },

    run = function(step_end) {
      m <- dust_volatility_run(private$ptr_, step_end)
      rownames(m) <- names(private$index_)
      m
    },

    set_index = function(index) {
      dust_volatility_set_index(private$ptr_, index)
      private$index_ <- index
      invisible()
    },

    index = function() {
      private$index_
    },

    n_threads = function() {
      private$n_threads_
    },

    set_state = function(state, step = NULL) {
      dust_volatility_set_state(private$ptr_, state, step)
    },

    reset = function(pars, step) {
      if (private$pars_multi_) {
        private$check_pars_multi(pars)
      }
      private$info_ <- dust_volatility_reset(private$ptr_, pars, step)
      private$index_ <- NULL
      private$pars_ <- pars
      invisible()
    },

    set_pars = function(pars) {
      if (private$pars_multi_) {
        private$check_pars_multi(pars)
      }
      private$info_ <- dust_volatility_set_pars(private$ptr_, pars)
      private$pars_ <- pars
    },

    state = function(index = NULL) {
      m <- dust_volatility_state(private$ptr_, index)
      rownames(m) <- names(index)
      m
    },

    step = function() {
      dust_volatility_step(private$ptr_)
    },

    reorder = function(index) {
      storage.mode(index) <- "integer"
      dust_volatility_reorder(private$ptr_, index)
      invisible()
    },

    info = function() {
      private$info_
    },

    pars = function() {
      private$pars_
    },

    rng_state = function(first_only = FALSE) {
      dust_volatility_rng_state(private$ptr_, first_only)
    },

    set_rng_state = function(rng_state) {
      dust_volatility_set_rng_state(private$ptr_, rng_state)
      invisible()
    },

    has_openmp = function() {
      dust_volatility_has_openmp()
    },

    n_pars = function() {
      if (private$pars_multi_) length(private$pars_) else 0L
    },

    set_n_threads = function(n_threads) {
      prev <- private$n_threads_
      dust_volatility_set_n_threads(private$ptr_, n_threads)
      private$n_threads_ <- n_threads
      invisible(prev)
    },

    set_data = function(data) {
      dust_volatility_set_data(private$ptr_, data)
    },

    compare_data = function() {
      dust_volatility_compare_data(private$ptr_)
    }
  ))
class(volatility) <- c("dust_generator", class(volatility))
walk <- R6::R6Class(
  "dust",
  cloneable = FALSE,

  private = list(
    pars_ = NULL,
    pars_multi_ = NULL,
    index_ = NULL,
    info_ = NULL,
    n_threads_ = NULL,
    ptr_ = NULL,
    param_ = NULL,

    simulate = function(steps, pars, state, index = NULL,
                        n_threads = 1L, seed = NULL,
                        return_state = FALSE) {
      dust_walk_simulate(steps, pars, state, index, n_threads, seed,
                             return_state)
    },

    check_pars_multi = function(pars, len) {
      if (!is.list(pars) || !is.null(names(pars))) {
        stop("Expected 'pars' to be an unnamed list as 'pars_multi' is used")
      }
      n <- length(private$pars_)
      if (n == 0 && length(pars) == 0) {
        stop("Expected 'pars' to have at least one element")
      } else if (n > 0 && length(pars) != n) {
        stop(sprintf("Expected 'pars' to have %d elements", n))
      }
    }
  ),

  public = list(
    initialize = function(pars, step, n_particles, n_threads = 1L,
                          seed = NULL, pars_multi = FALSE) {
      if (pars_multi) {
        private$check_pars_multi(pars)
      }
      res <- dust_walk_alloc(pars, pars_multi, step, n_particles,
                        n_threads, seed)
      private$pars_ <- pars
      private$pars_multi_ <- pars_multi
      private$n_threads_ <- n_threads
      private$ptr_ <- res[[1L]]
      private$info_ <- res[[2L]]
    },

    name = function() {
      "walk"
    },

    param = function() {
      private$param_
    },

    run = function(step_end) {
      m <- dust_walk_run(private$ptr_, step_end)
      rownames(m) <- names(private$index_)
      m
    },

    set_index = function(index) {
      dust_walk_set_index(private$ptr_, index)
      private$index_ <- index
      invisible()
    },

    index = function() {
      private$index_
    },

    n_threads = function() {
      private$n_threads_
    },

    set_state = function(state, step = NULL) {
      dust_walk_set_state(private$ptr_, state, step)
    },

    reset = function(pars, step) {
      if (private$pars_multi_) {
        private$check_pars_multi(pars)
      }
      private$info_ <- dust_walk_reset(private$ptr_, pars, step)
      private$index_ <- NULL
      private$pars_ <- pars
      invisible()
    },

    set_pars = function(pars) {
      if (private$pars_multi_) {
        private$check_pars_multi(pars)
      }
      private$info_ <- dust_walk_set_pars(private$ptr_, pars)
      private$pars_ <- pars
    },

    state = function(index = NULL) {
      m <- dust_walk_state(private$ptr_, index)
      rownames(m) <- names(index)
      m
    },

    step = function() {
      dust_walk_step(private$ptr_)
    },

    reorder = function(index) {
      storage.mode(index) <- "integer"
      dust_walk_reorder(private$ptr_, index)
      invisible()
    },

    info = function() {
      private$info_
    },

    pars = function() {
      private$pars_
    },

    rng_state = function(first_only = FALSE) {
      dust_walk_rng_state(private$ptr_, first_only)
    },

    set_rng_state = function(rng_state) {
      dust_walk_set_rng_state(private$ptr_, rng_state)
      invisible()
    },

    has_openmp = function() {
      dust_walk_has_openmp()
    },

    n_pars = function() {
      if (private$pars_multi_) length(private$pars_) else 0L
    },

    set_n_threads = function(n_threads) {
      prev <- private$n_threads_
      dust_walk_set_n_threads(private$ptr_, n_threads)
      private$n_threads_ <- n_threads
      invisible(prev)
    },

    set_data = function(data) {
      dust_walk_set_data(private$ptr_, data)
    },

    compare_data = function() {
      dust_walk_compare_data(private$ptr_)
    }
  ))
class(walk) <- c("dust_generator", class(walk))
