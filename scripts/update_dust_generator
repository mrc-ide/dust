#!/usr/bin/env Rscript
devtools::load_all()

template_r <- read_lines("inst/template/dust.R.template")

txt <- glue_whisker(template_r, list(name = "dust_generator", param = "NULL"))
txt <- gsub(") \\{.+?\n    \\}", ") {\n    }", txt)

header <- c(
  "## DO NOT EDIT THIS FILE!",
  "## Instead, edit the file inst/template/dust.R.template",
  "## and run ./scripts/update_dust_generator",
  "",
  "## NOTE: R6 classes do not support interfaces and inheritence is not",
  "## really needed here as this does not *do* anything, so consider this",
  "## a hack to allow Roxygen's R6 documentation to work.",
  "",
  "## The code and object below have exactly the interface of all generated",
  "## dust objects, and this page acts as a reference for all such methods",
   "## modelled on the ?regex page in base R's documentation")

writeLines(c(header, txt), "R/dust_generator.R")
