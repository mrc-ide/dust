#!/usr/bin/env bash
# We can't run the cuda vignette meaningfully on any computer that
# lacks a suitable graphics card and toolchain (including CI or CRAN),
# so we pre-compile it occasionally here. The version in vignettes_src
# should be edited, then this script run to create the version in
# vignettes
(cd vignettes_src && Rscript -e 'knitr::knit("cuda.Rmd")')
header="DO NOT EDIT THIS FILE - see vignettes_src and make changes there"
sed -s 's/[[:space:]]*$//' vignettes_src/cuda.md |
    sed 's/\r//g' |
    sed "s/HEADER/$header/" > vignettes/cuda.Rmd
